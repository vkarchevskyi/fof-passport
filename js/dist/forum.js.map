{"version":3,"file":"forum.js","mappings":"MACA,IAAIA,EAAsB,CCA1BA,EAAyBC,IACxB,IAAIC,EAASD,GAAUA,EAAOE,WAC7B,IAAOF,EAAiB,QACxB,IAAM,EAEP,OADAD,EAAoBI,EAAEF,EAAQ,CAAEG,EAAGH,IAC5BA,CAAM,ECLdF,EAAwB,CAACM,EAASC,KACjC,IAAI,IAAIC,KAAOD,EACXP,EAAoBS,EAAEF,EAAYC,KAASR,EAAoBS,EAAEH,EAASE,IAC5EE,OAAOC,eAAeL,EAASE,EAAK,CAAEI,YAAY,EAAMC,IAAKN,EAAWC,IAE1E,ECNDR,EAAwB,CAACc,EAAKC,IAAUL,OAAOM,UAAUC,eAAeC,KAAKJ,EAAKC,GCClFf,EAAyBM,IACH,oBAAXa,QAA0BA,OAAOC,aAC1CV,OAAOC,eAAeL,EAASa,OAAOC,YAAa,CAAEC,MAAO,WAE7DX,OAAOC,eAAeL,EAAS,aAAc,CAAEe,OAAO,GAAO,G,+BCL9D,MAAM,EAA+BC,OAAOC,KAAKC,OAAO,iBCAlD,EAA+BF,OAAOC,KAAKC,OAAO,a,aCAxD,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,iC,aCAxD,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,gC,aCMxDC,IAAAA,aAAiBC,IAAI,6BAA6B,YAChDC,EAAAA,EAAAA,QAAOC,IAAAA,UAAwB,SAAS,SAAUC,GAChDA,EAAMH,IACJ,4BACAI,IAAAA,UACE,CACEC,UAAW,+BACXC,KAAMP,IAAAA,MAAUQ,UAAU,uCAC1BC,KAAM,kBAERT,IAAAA,MAAUQ,UAAU,yCAG1B,GACF,ICpBA,MAAM,EAA+BX,OAAOC,KAAKC,OAAO,oC,aCAxD,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,8B,aCAxD,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,uC,aCAxD,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,gC,aCAxD,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,+B,cCQxDW,EAAAA,EAAAA,UAASC,IAAAA,UAA2B,SAAS,SAAUC,GACnD,IAAMR,EAAQQ,IA4Bd,OA1BIR,EAAMS,IAAI,UACVT,EAAMU,WACF,QACAT,IAAAA,UACI,CACIC,UAAW,wDACXG,KAAM,kBAEV,WAKRL,EAAMS,IAAI,WACVT,EAAMU,WACF,SACAT,IAAAA,UACI,CACIC,UAAW,yDACXG,KAAM,oCAEV,YAKLL,CACX,KAEAM,EAAAA,EAAAA,UAASK,IAAAA,UAAqB,uBAAuB,WACjD,OAAO,IAAIC,SAAQ,SAACC,EAASC,GACzB,OAAIlB,IAAImB,QAAQC,MACZpB,IAAIqB,SAASC,KAAKC,IAAoB,CAACH,KAAMpB,IAAImB,QAAQC,OACzDpB,IAAIqB,SAASG,OAENP,EAAQjB,IAAIqB,YAEnBI,SAASC,cAAc,0BAA0BC,QAE1CT,IAEf,GACJ,KAEAhB,EAAAA,EAAAA,QAAO0B,IAAAA,UAAuB,YAAY,WACtCH,SAASC,cAAc,kDAAkDC,OAC7E,KAEAjB,EAAAA,EAAAA,UAASmB,IAAAA,UAAsB,UAAU,WACrCJ,SAASC,cAAc,iCAAiCC,QACxDF,SAASC,cAAc,QAAQI,MAAMC,QAAU,QAC/CN,SAASC,cAAc,UAAUM,QACrC,G","sources":["webpack://@fof/passport/webpack/bootstrap","webpack://@fof/passport/webpack/runtime/compat get default export","webpack://@fof/passport/webpack/runtime/define property getters","webpack://@fof/passport/webpack/runtime/hasOwnProperty shorthand","webpack://@fof/passport/webpack/runtime/make namespace object","webpack://@fof/passport/external root \"flarum.core.compat['common/extend']\"","webpack://@fof/passport/external root \"flarum.core.compat['forum/app']\"","webpack://@fof/passport/external root \"flarum.core.compat['forum/components/LogInButtons']\"","webpack://@fof/passport/external root \"flarum.core.compat['forum/components/LogInButton']\"","webpack://@fof/passport/./src/forum/index.ts","webpack://@fof/passport/external root \"flarum.core.compat['forum/components/HeaderSecondary']\"","webpack://@fof/passport/external root \"flarum.core.compat['forum/components/IndexPage']\"","webpack://@fof/passport/external root \"flarum.core.compat['forum/components/DiscussionComposer']\"","webpack://@fof/passport/external root \"flarum.core.compat['forum/components/SignUpModal']\"","webpack://@fof/passport/external root \"flarum.core.compat['forum/components/LogInModal']\"","webpack://@fof/passport/./src/forum/improvements.js"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/extend'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/app'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/LogInButtons'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/LogInButton'];","import { extend } from 'flarum/common/extend';\nimport app from 'flarum/forum/app';\nimport LogInButtons from 'flarum/forum/components/LogInButtons';\nimport LogInButton from 'flarum/forum/components/LogInButton';\nimport ItemList from 'flarum/common/utils/ItemList';\n\napp.initializers.add('vkarchevskyi-fof-passport', () => {\n  extend(LogInButtons.prototype, 'items', function (items: ItemList) {\n    items.add(\n      'vkarchevskyi-fof-passport',\n      LogInButton.component(\n        {\n          className: 'Button LogInButton--passport',\n          icon: app.forum.attribute('vkarchevskyi-fof-passport.loginIcon'),\n          path: '/auth/passport',\n        },\n        app.forum.attribute('vkarchevskyi-fof-passport.loginTitle')\n      )\n    );\n  });\n});\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/HeaderSecondary'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/IndexPage'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/DiscussionComposer'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/SignUpModal'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/LogInModal'];","import { extend, override } from 'flarum/common/extend';\nimport HeaderSecondary from 'flarum/forum/components/HeaderSecondary';\nimport LogInButton from 'flarum/forum/components/LogInButton';\nimport IndexPage from \"flarum/forum/components/IndexPage\";\nimport DiscussionComposer from \"flarum/forum/components/DiscussionComposer\";\nimport SignUpModal from \"flarum/forum/components/SignUpModal\";\nimport LogInModal from \"flarum/forum/components/LogInModal\";\n\noverride(HeaderSecondary.prototype, 'items', function (original) {\n    const items = original();\n\n    if (items.has('logIn')) {\n        items.setContent(\n            'logIn',\n            LogInButton.component(\n                {\n                    className: 'LinksButton Button Button--link LogInButton--passport',\n                    path: '/auth/passport',\n                },\n                'Log In'\n            )\n        );\n    }\n\n    if (items.has('signUp')) {\n        items.setContent(\n            'signUp',\n            LogInButton.component(\n                {\n                    className: 'LinksButton Button Button--link SignUpButton--passport',\n                    path: '/auth/passport?to_registration=1',\n                },\n                'Sign Up'\n            )\n        );\n    }\n\n    return items\n});\n\noverride(IndexPage.prototype, 'newDiscussionAction', function () {\n    return new Promise((resolve, reject) => {\n        if (app.session.user) {\n            app.composer.load(DiscussionComposer, {user: app.session.user});\n            app.composer.show();\n\n            return resolve(app.composer);\n        } else {\n            document.querySelector('.LogInButton--passport').click();\n\n            return reject();\n        }\n    });\n});\n\nextend(SignUpModal.prototype, 'oncreate', () => {\n    document.querySelector('.Button.SignUpModal form button[type=\"submit\"]').click();\n});\n\noverride(LogInModal.prototype, 'oninit', () => {\n    document.querySelector('.Button.LogInButton--passport').click();\n    document.querySelector('body').style.display = 'block';\n    document.querySelector('#modal').remove();\n});\n"],"names":["__webpack_require__","module","getter","__esModule","d","a","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","Symbol","toStringTag","value","flarum","core","compat","app","add","extend","LogInButtons","items","LogInButton","className","icon","attribute","path","override","HeaderSecondary","original","has","setContent","IndexPage","Promise","resolve","reject","session","user","composer","load","DiscussionComposer","show","document","querySelector","click","SignUpModal","LogInModal","style","display","remove"],"sourceRoot":""}